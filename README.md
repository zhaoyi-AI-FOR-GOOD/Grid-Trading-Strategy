# ETH网格交易策略回测系统

基于币安真实数据的ETH合约网格交易策略回测分析工具，专为优化100万USDT资金的网格交易参数配置而设计。

## 🚀 功能特性

### 核心功能
- **真实数据回测**: 集成币安合约API，获取ETH/USDT真实历史交易数据
- **多时间周期**: 支持1小时、4小时、1天K线数据分析
- **灵活网格配置**: 支持等差/等比网格，10-100个网格数量可调
- **杠杆交易模拟**: 1-20倍杠杆倍数，模拟真实合约交易
- **专业指标分析**: 总收益率、年化收益率、最大回撤、夏普比率等

### 可视化分析
- **账户价值追踪**: 实时显示账户价值vs ETH价格走势
- **交易历史图表**: 清晰展示买卖点和交易时机
- **风险回撤分析**: 详细的回撤曲线和风险控制指标
- **利润分布统计**: 交易盈亏分布直方图

### 智能优化
- **参数优化建议**: 基于回测结果的智能参数调整建议
- **风险评估报告**: 多维度风险分析和控制建议
- **市场适应性分析**: 根据市场趋势提供策略调整方案

## 📋 技术架构

### 前端技术栈
- HTML5 + CSS3 + 原生JavaScript
- Chart.js 图表可视化库
- 响应式设计，支持桌面和移动端

### API集成
- 币安合约API (https://fapi.binance.com/fapi/v1/klines)
- 支持跨域请求和错误重试机制
- 数据缓存优化，提升用户体验

### 核心模块
- **BinanceAPI**: 数据获取和格式化
- **GridStrategy**: 网格交易策略算法
- **BacktestEngine**: 回测引擎和分析
- **ChartManager**: 图表管理和可视化

## 🛠️ 快速开始

### 1. 下载代码
```bash
git clone <repository_url>
cd eth-grid-backtest
```

### 2. 启动服务
```bash
# 使用Python启动本地服务器
python3 -m http.server 8000

# 或使用Node.js
npx serve .

# 或直接用浏览器打开 index.html
```

### 3. 访问应用
打开浏览器访问 `http://localhost:8000`

## 💡 使用指南

### 参数配置说明

#### 基础参数
- **初始资金**: 推荐100万USDT，可根据实际情况调整
- **价格区间**: 设置网格的上下边界百分比（如-10%到+10%）
- **网格数量**: 建议20-30个网格，平衡交易频率和风险
- **网格类型**: 等差网格适合震荡市场，等比网格适合趋势市场

#### 高级参数
- **杠杆倍数**: 建议2-3倍，平衡收益和风险
- **时间周期**: 1小时适合短期，1天适合长期分析
- **手续费率**: 固定0.02%（币安标准费率）

### 回测流程
1. **配置参数**: 根据风险偏好设置策略参数
2. **获取数据**: 系统自动获取最近30天ETH价格数据
3. **执行回测**: 运行网格交易策略模拟
4. **分析结果**: 查看收益指标、风险分析和优化建议
5. **参数优化**: 根据建议调整参数并重新回测

## 📊 核心指标说明

### 盈利指标
- **总收益率**: (最终价值 - 初始资金) / 初始资金
- **年化收益率**: 按365天标准化的年化收益
- **单次平均利润**: 每笔交易的平均盈利金额

### 风险指标
- **最大回撤**: 账户价值从峰值到谷值的最大跌幅
- **夏普比率**: 风险调整后的收益率指标
- **胜率**: 盈利交易占总交易次数的比例

### 交易统计
- **总交易次数**: 包含买入和卖出的总次数
- **有效触发次数**: 成功完成买卖循环的次数
- **平均持仓时间**: 每笔交易的平均持有期

## ⚠️ 风险提示

1. **历史表现不代表未来**: 回测结果基于历史数据，实际交易可能差异较大
2. **市场风险**: 加密货币市场波动巨大，请合理控制仓位
3. **技术风险**: 网格策略在单边市场中可能面临较大风险
4. **流动性风险**: 实际交易中可能面临滑点和深度不足问题

## 🎯 优化建议

### 保守策略
- 杠杆倍数: 1-2倍
- 价格区间: ±5-8%
- 网格数量: 15-20个
- 适合风险承受能力较低的投资者

### 均衡策略
- 杠杆倍数: 2-3倍
- 价格区间: ±8-12%
- 网格数量: 20-30个
- 平衡收益和风险的中性策略

### 激进策略
- 杠杆倍数: 3-5倍
- 价格区间: ±12-20%
- 网格数量: 30-50个
- 适合有丰富经验的高风险投资者

## 🔧 技术支持

### 常见问题
1. **API请求失败**: 检查网络连接，币安API可能有地区限制
2. **数据加载慢**: 首次获取数据较慢，后续有缓存加速
3. **图表不显示**: 确保浏览器支持Canvas和JavaScript

### 性能优化
- 数据缓存: 5分钟内重复请求使用缓存数据
- 图表优化: 大数据量时自动采样显示
- 内存管理: 及时清理不用的图表实例

## 📝 更新日志

### v1.0.0 (当前版本)
- ✅ 基础网格策略回测功能
- ✅ 币安API数据集成
- ✅ 多指标分析和可视化
- ✅ 参数优化建议系统
- ✅ 响应式用户界面

### 计划功能
- 🔄 多币种支持
- 🔄 策略对比分析
- 🔄 实盘接入功能
- 🔄 更多技术指标

## 📞 联系我们

如有问题或建议，欢迎联系开发团队。

---

**免责声明**: 本工具仅用于教育和研究目的，不构成投资建议。请在充分了解风险的情况下进行实际交易。